function setColor(e,t){return e[Math.floor(Math.random()*t.length)].classList.add("orginColor")}function elementToTop(e){return e.offsetParent?this.elementToTop(e.offsetParent)+e.offsetTop:e.offsetTop}function throttle(e,t){var n;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function debounce(e,t){var n;return function(){clearInterval(n),n=setTimeout(e,t)}}$.ajax({type:"get",url:"http://localhost:6555/php/ATB.php",data:"getData=top",success:function(e){for(var t in e)for(var n in e[t]){var a=document.createElement("li"),o=document.createElement("div"),r=document.createElement("a");if(o.className="topItem",r.href=" ",r.innerText=n,o.appendChild(r),a.appendChild(o),"login"===t?$("#topLeft").append(a):$("#topRight").append(a),""!=e[t][n]){for(var c=document.createElement("div"),i=document.createElement("span"),l=0;l<e[t][n].length;l++){var s=document.createElement("a");s.innerText=e[t][n][l],c.appendChild(s)}i.className="icon iconfont icon-arrow",c.className="hidden tophid",o.appendChild(i),c.style.width=o.parentNode.offsetWidth+"px",o.parentNode.appendChild(c)}}!function(){var e=["","icon-gouwuche","icon-shoucangjia","","icon-daohang"];function t(){$(".tophid")[n].parentNode.firstChild.insertBefore(a,$(".tophid")[n].parentNode.firstChild.firstChild),$(".tophid")[n].style.width=parseInt($(".tophid")[n].style.width)+17+"px"}for(var n=0;n<e.length;n++){var a=document.createElement("span");switch(a.className="iconbefor icon iconfont "+e[n],n){case 1:case 2:case 4:t()}}}(),function(){for(var e=[$(".topItem a")[0],$(".topItem a")[3],$(".topItem span")[1],$(".topItem span")[2],$(".topItem span")[6],$(".topItem span")[7]],t=0;t<e.length;t++)e[t].classList.add("orginColor")}()}}),$.ajax({type:"GET",url:"http://localhost:6555/php/ATB.php",data:"getData=topAd",success:function(e){var t=e.loadBefore,n=e.loadAfter,a=document.createElement("a"),o=document.createElement("img");a.href="",o.src=t,a.appendChild(o),$("#topAd").append(a),$("#topAd").animate({height:"74px"},2e3,function(){o.src=n})}}),$.ajax({type:"get",url:"http://localhost:6555/php/ATB.php",data:"getData=search",success:function(e){for(var t,n,a,o=e.searchKey,r=0;r<o.length;r++){var c=document.createElement("a");c.href=" ",c.innerText=o[r],$("#searchKey").append(c)}$("#searchKey a")[0].classList.add("orginColor"),setColor($("#searchKey a"),o),t=e.searchAd,n=document.createElement("a"),(a=document.createElement("img")).src=t,n.href=" ",n.appendChild(a),$("#searchAd").append(n)}}),$.ajax({type:"get",url:"http://localhost:6555/php/ATB.php",data:"getData=nav",success:function(e){var t=e.reach,n=e.ju;for(var a in t){var o=document.createElement("li"),r=document.createElement("a");if(r.href=" ",r.innerText=a,o.appendChild(r),$("#nav").append(o),""!=t[a]){var c=document.createElement("span");c.className="icon iconfont icon-arrow",c.id="fengArrow",o.id="feng",o.append(c);var i=document.createElement("div");o.appendChild(i);for(var l=0;l<t[a].length;l++){var s=document.createElement("a");s.href=" ",s.innerText=t[a][l],i.appendChild(s)}}if("聚划算"===a){var d=document.createElement("img");d.id="ju",d.src=n,o.appendChild(d)}}}}),$.ajax({type:"get",url:"http://localhost:6555/php/ATB.php",data:"getData=mainnews",success:function(e){for(var t=[e.mainTopNewsImg,e.mainBotmNewsad.ad,e.mainBotNewsImg],n=0;n<t.length;n++)for(var a=0;a<t[n].length;a++){var o=document.createElement("a"),r=document.createElement("img");o.href=" ",r.src=t[n][a],o.appendChild(r),$(".newsad:eq("+n+")").append(o)}for(n=0;n<e.mainTopNavImg.length;n++){var c=document.createElement("a"),i=document.createElement("img");i.src=e.mainTopNavImg[n],c.href=" ",c.appendChild(i),$("#mainRightTopNav").append(c)}for($("#mainRightTopLeft em")[0].className="icon iconfont "+e.mainBotmNewsad.icon[0],$("#mainRightTopRig em")[0].className="icon iconfont "+e.mainBotmNewsad.icon[1],$("#mainRightTopLeft span")[0].innerText=e.mainBotmNewsad.top[0],$("#mainRightTopRig span")[0].innerText=e.mainBotmNewsad.top[1],n=0;n<e.mainBotmNewsad.title.length;n++){c=document.createElement("a");var l=document.createElement("em"),s=document.createElement("span");l.innerText=e.mainBotmNewsad.title[n],s.innerText=e.mainBotmNewsad.news[n],c.href=" ",c.appendChild(l),c.appendChild(s),$("#mainRightBotmNews").append(c)}}}),function(){for(var e=0;e<$(".discutTopContentLineHeng").length;e++)$(".discutTopContentLineHeng")[e].style.top=50*(e+1)+"px";$.ajax({type:"get",url:"http://localhost:6555/php/ATB.php",data:"getData=discountLeft",success:function(e){var t=e.top,n=e.bottom;$("#discutLefTopTitle a span").text(t.title[1]);for(var a=0;a<t.content.icon.length;a++){var o=document.createElement("a"),r=document.createElement("em"),c=document.createElement("span");o.href=" ",r.className="icon iconfont "+t.content.icon[a],c.innerText=t.content.text[a],o.appendChild(r),o.appendChild(c),$("#discutTopContent").append(o)}for(var i in $("#discountLeftBottom h4").text(n.title),n.content.text){var l=document.createElement("p"),s=document.createElement("span"),d=document.createElement("a");for(d.href=" ",d.className="discountLeftBottomTitle",d.innerText=i,l.appendChild(d),a=0;a<n.content.text[i].length;a++){var p=document.createElement("a");p.href=" ",p.className="discountLeftBottomText",p.innerText=n.content.text[i][a],s.appendChild(p)}l.appendChild(s),$("#discutBtmContent").append(l),setColor(s.children,n.content.text[i])}}})}(),function(){var t=setInterval(function(){if("74"==$("#topAd")[0].offsetHeight){var o=!0;function e(){var e=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.clientHeight,n=Math.ceil(e+t),a=$("#discount")[0].offsetTop+$("#discount")[0].offsetHeight;if(a<=n&&o){$.ajax({type:"get",url:"http://localhost:6555/php/getFloorsData.php",data:"getFloorPage=floors",success:function(e){var t=JSON.parse(e),n={};for(var a in t)n[a]=JSON.parse(t[a]);var o=template("temp",{comments:n});$("#floor").append(o);for(var r=0;r<$(".floorsBox").length;r++){var c=n["page"+(r+1).toString()].right.color;$(".FBleft")[r].style.color=c.form,$(".FBleft h4")[r].style.borderColor=c.form,$(".floorLeftTitleAd")[r].style.color=c.form,$(".FBRright")[r].style.background="linear-gradient(to top,"+c.form+","+c.to+")";for(var i=0;i<$(".FBLbottom:eq("+[r]+") p").length;i++)setColor($(".FBLbottom:eq("+[r]+") p span")[i].children,$(".FBLbottom:eq("+[r]+") p span")[i].children)}}}),o=!1}}clearInterval(t),e(),document.addEventListener("scroll",e)}},200)}(),function(){var e=!0,t=!0;function n(d){if(document.documentElement.scrollTop=$("#recommend")[0].offsetTop,"pageOne"==d?($("#pageOneBox")[0].className="",$("#pageTwoBox")[0].className="hidden"):"pageTwo"==d&&($("#pageOneBox")[0].className="hidden",$("#pageTwoBox")[0].className=""),"pageOne"==d&&e||"pageTwo"==d&&t){"pageOne"==d?e=!1:"pageTwo"==d&&(t=!1),$.ajax({type:"get",url:"http://localhost:6555/php/pageData.php",data:"getRecomPage="+d,success:function(e){var t=JSON.parse(e);for(var n in t){var a=JSON.parse(t[n]);for(var o in a){var r=document.createElement("a"),c=document.createElement("img"),i=document.createElement("span"),l=document.createElement("p");r.href=" ",r.className="recomItem",c.className="recomImg",c.setAttribute("data-src",a[o].src),i.innerText=a[o].price,l.innerText=a[o].newsad,r.appendChild(i),r.appendChild(c),r.appendChild(l),$("#"+d+"Box").append(r)}}for(var s=0;s<$(".recomItem").length;s++)s%4==0&&($(".recomItem")[s].style.marginLeft="0")}})}}function a(e){return $(e).addClass("recomChangecolor").siblings().removeClass("recomChangecolor")}n("pageOne"),$("#pageOne").on("click",function(){a(this),n("pageOne")}),$("#pageTwo").on("click",function(){a(this),n("pageTwo")})}(),function(){function e(){var e=$("img[data-src]"),t=$(window).height()+$(window).scrollTop();0<e.length&&e.each(function(){t>elementToTop(this)&&(this.src=this.getAttribute("data-src"),$(this).removeAttr("data-src"))})}e(),document.addEventListener("scroll",throttle(e,200))}(),$.ajax({type:"get",url:"http://localhost:6555/php/ATB.php",data:"getData=carsousel",success:function(e){var s=e.carousel1,m=e.carousel2,x=e.carousel3;!function(){var e=s.src,t=document.createElement("p"),n=0,c=!0;$("#mainRightTopCarsousel").append(t);for(var a=0;a<e.length;a++){var o=document.createElement("li"),r=document.createElement("a"),i=document.createElement("img");i.className="carsouselImg",r.href=" ",i.src=e[a],r.appendChild(i),o.appendChild(r),$("#carousel1Box").append(o);var l=document.createElement("span");l.className="carsousel1Point",l.index=n,t.appendChild(l),n++}$("#carousel1Box").css("width",$(".carsouselImg")[0].offsetWidth*(e.length+1)+"px"),$("#carousel1Box").append($("#carousel1Box :first").clone(!0)),$(".carsousel1Point:first").css("background-color","#ff5a00"),function(){var e=0,t=$(".carsouselImg")[0].offsetWidth;function n(){$("#carousel1Box").animate({left:-e*t+"px"},500,function(){c=!0})}function a(){$(".carsousel1Point").css("background-color","#cbcbcb"),e<8?$(".carsousel1Point")[e].style.backgroundColor="#ff5a00":$(".carsousel1Point")[0].style.backgroundColor="#ff5a00"}function o(){c&&(c=!1,this==$("#carLeftNav")[0]?e<=0?($("#carousel1Box").css("left","-4160px"),e=7):e-=1:7<e?($("#carousel1Box").css("left","0px"),e=1):e-=-1,n(),a())}$(".carsousel1Point").mouseover(function(){e=this.index,c&&(c=!1,n(),a())}),$("#mainRightTopCarsousel div").click(o);var r=window.setInterval(o.bind($("#carRightNav")[0]),3e3);$("#carousel1Box").mouseover(function(){clearInterval(r)}),$("#carousel1Box").mouseout(function(){r=setInterval(o.bind($("#carRightNav")[0]),3e3)})}()}(),function(){for(var e=m.src,t=!0,n=0,a=0;a<e.length;a++){var o=document.createElement("li"),r=document.createElement("a"),c=document.createElement("img");r.href=" ",c.className="carsousel2Img",c.src=m.src[a],c.index=a,r.appendChild(c),o.appendChild(r),$("#carousel2Box").append(o);var i=document.createElement("p"),l=document.createElement("h4"),s=document.createElement("span");l.className="carsousel2h5",l.innerText=m.title[a],s.innerText=m.news[a],i.appendChild(l),i.appendChild(s),r.appendChild(i)}var d=$(".carsousel2Img")[0].offsetWidth;function p(){t&&(t=!1,this==$("#carRightNav1")[0]?(n+=1)>$(".carsousel2Img").length-1&&($("#carousel2Box").css("left","0px"),n=1):this==$("#carLeftNav1")[0]&&(n-=1)<0&&($("#carousel2Box").css("left","-630px"),n=2),$("#carousel2Box").animate({left:-n*d+"px"},500,function(){t=!0}))}$("#carousel2Box").css("width",d*(e.length+1)+"px"),$("#carousel2Box").append($("#carousel2Box :first").clone(!0)),$("#mainRightBttomCarsousel div").click(p),setInterval(p.bind($("#carRightNav1")[0]),3e3)}(),function(){var e=0;for(var t in x){var n=document.createElement("div"),a=document.createElement("span");a.className="car3ChosePoint",a.index=e,n.className="car3Page",$("#car3Chose p").append(a),e++;for(var o=0;o<x[t].src.length;o++){var r=document.createElement("a"),c=document.createElement("img"),i=document.createElement("span"),l=document.createElement("em"),s=document.createElement("span"),d=document.createElement("span"),p=document.createElement("span"),m=document.createElement("p");l.innerText="￥",s.innerText=x[t].price[o],d.innerText=x[t].oldPrice[o],p.innerText="包邮",c.setAttribute("data-src",x[t].src[o]),i.innerText=x[t].picNew[o],r.href=" ",s.className="pirce",d.className="oldpirce",p.className="baoyou",m.appendChild(l),m.appendChild(s),m.appendChild(d),m.appendChild(p),r.appendChild(c),r.appendChild(i),r.appendChild(m),n.appendChild(r)}$("#car3Box").append(n)}var h=$(".car3Page")[0].offsetWidth,u=$(".car3Page").length;$("#car3Box").css("width",h*(u+1)+"px"),$("#car3Box").append($("#car3Box :first").clone(!0)),$(".car3ChosePoint")[0].style.backgroundColor="#E43825";var f=!0,g=0;function v(){f&&(f=!1,$("#car3Chose em")[0].innerText=g+1+"/5",$(".car3ChosePoint").css("background-color","#cbcbcb"),$(".car3ChosePoint:eq("+g+")").css("background-color","#E43825"),5==g&&($("#car3Chose em")[0].innerText="1/5",$(".car3ChosePoint:eq(0)").css("background-color","#E43825")),$("#car3Box").animate({left:-g*h+"px"},500,function(){f=!0}))}$(".car3ChosePoint").click(function(){g=this.index,v()}),setInterval(function(){5<(g+=1)&&($("#car3Box").css("left","0px"),g=1),v()},3e3)}()}}),$.ajax({type:"get",url:"http://localhost:6555/php/ATB.php",data:"getData=mainLeftNav",success:function(e){var t=e.newsAd,f=e.mainLeft;$("#mainLeftTop a span").text(t.new),$("#mainLeftTop a em").addClass(t.icon);var g=0;for(var v in f){var n=document.createElement("a"),a=document.createElement("em");for(Key in n.href="",n.innerText=v,n.style.color=f[v].color,a.className="icon iconfont "+f[v].icon,a.style.color=f[v].color,$(".mLNLeft")[g].children[0].appendChild(n),$(".mLNLeft")[g].children[0].appendChild(a),f[v].chose){var o=document.createElement("a");o.href="",o.innerText=f[v].chose[Key],$(".mLNRight")[g].append(o)}setColor($(".mLNRight")[g].children,f[v].chose),$(".mainLeftNavHidden")[g].style.top=66.25*-g-2.5+"px",function(e){$(".mLNLeft")[g].parentNode.addEventListener("mouseenter",function(){this.style.borderColor=f[e].color,this.children[0].style.backgroundColor=f[e].color,this.children[2].style.display="block",this.children[2].style.borderColor=f[e].color}),$(".mLNLeft")[g].parentNode.addEventListener("mouseleave",function(){this.style.borderColor="#eee",this.children[0].style.backgroundColor="#eee",this.children[2].style.display="none"})}(v),function(){var e=f[v].title,t=f[v].newAd;for(var n in e){var a=document.createElement("div"),o=document.createElement("div"),r=document.createElement("a"),c=document.createElement("div"),i=document.createElement("div");for(var l in e[n]){var s=document.createElement("a");s.href=" ",s.innerText=e[n][l],i.appendChild(s)}r.href=" ",r.className="title",a.className="mLNRHidEvervDiv",o.className="mLNRhiddenTop",i.className="mLNRhiddenContent",c.className="lineColor",r.innerText=n,a.appendChild(o),a.appendChild(c),a.appendChild(i),o.appendChild(r),$(".mainLeftNavHidden")[g].append(a)}for(var d=0;d<t.length;d++){if(" "!=t[d]){var p=document.createElement("p");p.className="icon iconfont icon-tuangouzhekou";var m=document.createElement("a");m.innerText=t[d],m.href=" ",p.appendChild(m);var h=$(".mainLeftNavHidden")[g].children[d].children[0];h.appendChild(p),h.style.top="-5px",h.style.marginBottom="0px",h.children[1].style.color=f[v].color,h.children[1].children[0].style.color=f[v].color,h.children[1].children[0].style.borderColor=f[v].color;var u=$(".mainLeftNavHidden")[g].children[d].children[2].children;setColor(u,u)}$(".mainLeftNavHidden")[g].children[d].children[1].style.background="linear-gradient(to right,"+f[v].color+",#fff)"}if($(".mainLeftNavHidden")[g].children.length<6)for(d=0;d<3;d++)$(".mainLeftNavHidden")[g].children[d].style.height=280/($(".mainLeftNavHidden")[g].children.length-2)+"px"}(),g++}}});